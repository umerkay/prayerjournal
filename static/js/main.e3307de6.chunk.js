(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/loading.7d02b50b.gif"},24:function(e,t,a){e.exports=a(64)},29:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),i=(a(29),a(3)),o=(a(30),a(5)),s=a.n(o),u=a(10),m=(a(32),a(18)),d=a.n(m);a(33);function p(e){return e.msg?r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",Object.assign({className:"loading"+(e.bright?" bright":" dark"),width:"50px",src:d.a,alt:""},e)),r.a.createElement("div",{className:""},this.props.msg)):r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",Object.assign({className:"loading"+(e.bright?" bright":" dark"),width:"50px",src:d.a,alt:""},e)))}var f=a(4),v=a.n(f),h=a(8),g=a(7);function E(){var e=r.a.useState(v.a.get("verse")||{isLoading:!0}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=r.a.useState(null),o=Object(i.a)(l,2),m=o[0],d=o[1],f=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.date===(new Date).toLocaleDateString()){e.next=22;break}return c({isLoading:!0}),e.prev=2,e.next=5,fetch("https://cors-anywhere.herokuapp.com/https://salamquran.com/en/api/v6/aya/day");case 5:if((t=e.sent).ok){e.next=8;break}throw new Error(t);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(2),c({isLoading:!1}),d("The Quran API is unreachable right now"),e.abrupt("return");case 15:return e.next=17,t.json();case 17:n=e.sent.result.translate,r={reference:n.sura+":"+n.aya,sura:n.sura,aya:n.aya,text:n.text,date:(new Date).toLocaleDateString(),isLoading:!1},d(null),v.a.set("verse",r),c(r);case 22:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),r.a.createElement("div",{className:"card quran-card"},m&&!a.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"error"},m)):a.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference",style:{width:150}},r.a.createElement("div",{className:"filler"})),r.a.createElement(p,{dark:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference"},"Quran, ",a.reference),r.a.createElement("div",{className:"verse"},'"',a.text,'"')),r.a.createElement("div",{className:"more"},m&&!a.isLoading?r.a.createElement("button",{className:"more",onClick:f,style:{width:"120px",textAlign:"center"}},"Retry"):a.isLoading?r.a.createElement("button",{className:"more",style:{width:"120px",textAlign:"center"}},r.a.createElement("span",{className:"filler"})):r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://quran.com/".concat(a.sura,"/").concat(a.aya),className:"more clickable"},r.a.createElement("span",null," ",r.a.createElement(g.a,{icon:h.a})))))}a(49);function y(e){return r.a.createElement("div",{className:"card general-card "+(e.onClick?" clickable":""),onClick:e.onClick},r.a.createElement("span",null,e.children),r.a.createElement("span",null,e.text))}var b=a(12),O=a(6),k=a(2),j={hasInitialised:v.a.get("hasInitialised"),preferences:v.a.get("preferences"),stati:v.a.get("stati"),timings:v.a.get("timings")},N=Object(n.createContext)(j),S=N.Provider,w=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"INITIALISE_SUCCESS":return Object(k.a)({},e,{hasInitialised:!0,preferences:t.payload.preferences,stati:t.payload.stati});case"SYNC_STATI_DATE":case"EDIT_PRAYER_STATUS":return Object(k.a)({},e,{stati:t.payload.stati});case"EDIT_PREFERENCES":return Object(k.a)({},e,{preferences:t.payload.preferences});case"SET_TIMINGS":return Object(k.a)({},e,{timings:t.payload.timings});default:return e}}),j),c=Object(i.a)(a,2),l=c[0],o=c[1];return r.a.createElement(S,{value:{state:l,dispatch:o}},t)},C=(a(50),function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,r=Object(b.a)(t);r[n]=Object(k.a)({},r[n],{},a),e({type:"EDIT_PRAYER_STATUS",payload:{stati:r}}),v.a.set("stati",r)}),I=function(e,t){t.Zuhr=t.Dhuhr,e({type:"SET_TIMINGS",payload:{timings:t}}),v.a.set("timings",t)},x=["Fajr","Zuhr","Asr","Maghrib","Isha"];function T(e){var t=Object(n.useContext)(N),a=t.dispatch,c=t.state.stati,l=["S","M","T","W","T","F","S"],i=["o","d","m","n"];(new Date).toLocaleDateString()!==c[c.length-1].date&&function(e,t){var a=Object(b.a)(t);a.shift(),a.push({Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n",date:(new Date).toLocaleDateString()}),e({type:"SYNC_STATI_DATE",payload:{stati:a}}),v.a.set("stati",a)}(a,c);var o=x.map((function(e){return c.map((function(t){return t[e]}))})),s=(new Date).getDay(),u=l.splice(s+1);return l=[].concat(Object(b.a)(u),Object(b.a)(l)),r.a.createElement("div",{className:"card weekly-card dark"},r.a.createElement("div",{className:"heading"}," ",r.a.createElement("span",null,r.a.createElement(g.a,{icon:h.b}))," ",r.a.createElement("span",null,"This Week")),r.a.createElement("div",{className:"grid"},r.a.createElement("span",null),l.map((function(e,t){return r.a.createElement("span",{key:e+"."+t,className:"day"+(t===l.length-1?" today primary":"")},e)})),o.map((function(e){var t=x[o.indexOf(e)];return[r.a.createElement("span",{className:"prayerName",key:t},r.a.createElement("span",null,t)),e.map((function(e,n){return r.a.createElement("span",{key:t+"."+n,className:"status "+e,onClick:function(){return function(e,t,n){t=i[(i.indexOf(t)+1)%i.length],C(a,c,Object(O.a)({},e,t),n)}(t,e,n)}})}))]}))),r.a.createElement("div",{className:"key"},r.a.createElement("span",null,r.a.createElement("div",{className:"status o dormant"}),"Timely"),r.a.createElement("span",null,r.a.createElement("div",{className:"status d dormant"}),"Delayed"),r.a.createElement("span",null,r.a.createElement("div",{className:"status m dormant"}),"Missed")))}a(51);var A=a(11),D=a.n(A);a(61);function L(e){var t=e.modalIsOpen,a=e.toggle,c=e.save,l=e.prayerState,o=Object(n.useState)(Object(k.a)({},l)),s=Object(i.a)(o,2),u=s[0],m=s[1];return r.a.createElement("div",null,r.a.createElement(D.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal prayer-modal",overlayClassName:"modal-overlay prayer-modal-overlay"},r.a.createElement("div",{className:"heading"},"Record the status of",r.a.createElement("select",{value:x.indexOf(u.name),className:"slct",onChange:function(e){m(Object(k.a)({},u,{name:x[e.target.value]}))}},x.map((function(e,t){return r.a.createElement("option",{name:e,value:t,key:e},e)}))),"Prayer"),r.a.createElement("select",{name:"",id:"",value:u.status,className:"slct",onChange:function(e){m(Object(k.a)({},u,{status:e.target.value}))}},r.a.createElement("option",{value:"n"},"Not sure"),r.a.createElement("option",{value:"o"},"Timely"),r.a.createElement("option",{value:"d"},"Delayed"),r.a.createElement("option",{value:"m"},"Missed")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},"Discard"),r.a.createElement("button",{className:"btn primary clickable",onClick:function(){c(u),a(!1)}},"Save"))))}function M(e){var t=e.currTime,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)({}),d=Object(i.a)(m,2),p=d[0],f=d[1],v=Object(n.useState)(!0),h=Object(i.a)(v,2),g=h[0],E=h[1],y=Object(n.useContext)(N),b=y.state,j=b.preferences,S=j.location,w=j.calcMethod,T=b.timings,A=b.stati,D=y.dispatch;Object(n.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&(null===T||void 0===T?void 0:T.date)===(new Date).toLocaleDateString()&&(null===T||void 0===T||null===(t=T.location)||void 0===t?void 0:t.city)===S.city&&(null===T||void 0===T||null===(a=T.location)||void 0===a?void 0:a.country)===S.country){e.next=18;break}return E(!0),n=S.city,r=S.country,e.next=5,fetch("https://api.aladhan.com/v1/timingsByCity?city=".concat(n,"&country=").concat(r,"&method=").concat(w,"&school=1"));case 5:if((c=e.sent).ok){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,c.json();case 10:l=e.sent,(i=l.data.timings).location=Object(k.a)({},S),i.date=(new Date).toLocaleDateString(),I(D,i),E(!1),e.next=19;break;case 18:E(!1);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[w,D,S,T]);return r.a.createElement(r.a.Fragment,null,g?r.a.createElement("div",{className:"prayers-container"},x.map((function(e,t){return r.a.createElement(R,{status:"n",loading:!0,key:e})}))):r.a.createElement("div",{className:"prayers-container"},x.map((function(e,a){return r.a.createElement(R,{key:e,name:e,time:T[e],currTime:t,status:A[A.length-1][e],onClick:function(){f({name:e,status:A[A.length-1][e]}),o(!0)}})}))),l?r.a.createElement(L,{save:function(e){C(D,A,Object(O.a)({},e.name,e.status))},prayerState:p,modalIsOpen:l,toggle:o}):null)}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00:01";return parseInt(e.split(":")[0])>parseInt(t.split(":")[0])||parseInt(e.split(":")[0])===parseInt(t.split(":")[0])&&parseInt(e.split(":")[1])>parseInt(t.split(":")[1])}function R(e){var t=P(e.currTime,e.time),a={o:function(t){return"You prayed ".concat(e.name," Prayer on time")},m:function(t){return"You missed ".concat(e.name," Prayer")},n:function(t){return"".concat(e.time," Onwards ").concat(e.name," Prayer")},d:function(t){return"You prayed ".concat(e.name," Prayer at a delayed time")}};return r.a.createElement("button",{onClick:t?e.onClick:null,className:"card prayer-card "+e.status+(t?"":" future")},e.loading?r.a.createElement("span",{className:"filler"}):a[e.status](e))}D.a.setAppElement("body");a(62),a(63);var _=["Shia Ithna-Ansari","University of Islamic Sciences, Karachi","Islamic Society of North America","Muslim World League","Umm Al-Qura University, Makkah","Egyptian General Authority of Survey","Institute of Geophysics, University of Tehran","Gulf Region","Kuwait","Qatar","Majlis Ugama Islam Singapura, Singapore","Union Organization islamic de France","Diyanet \u0130\u015fleri Ba\u015fkanl\u0131\u011f\u0131, Turkey","Spiritual Administration of Muslims of Russia"];function U(){var e,t=Object(n.useContext)(N).dispatch,a=Object(n.useState)({calcMethod:0,location:void 0,theme:"dark"}),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],h=function(e){o(Object(k.a)({},l,{},e))};return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(s.a.mark((function e(t){var a,n,r,c,l,i,o,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),h({location:t.coords}),a=t.coords,n=a.latitude,r=a.longitude,c="https://geocode.xyz/".concat(n,",").concat(r,"?json=1"),e.next=6,fetch(c);case 6:return l=e.sent,e.next=9,l.json();case 9:i=e.sent,o=i.city,u=i.country,h({location:Object(k.a)({},t.coords,{city:o,country:u})}),f(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();navigator.geolocation.getCurrentPosition(e)}),[]),r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"card register-card"},r.a.createElement("div",{className:"heading"},"Prayer Journal",r.a.createElement("br",null)),r.a.createElement("p",null,"Before we begin, select a Prayer times calculation method and give access to your location"),r.a.createElement("select",{onChange:function(e){return h({calcMethod:e.target.value})},value:l.calcMethod},_.map((function(e,t){return r.a.createElement("option",{value:t},e)}))),r.a.createElement("div",null,p?r.a.createElement("button",{className:"dormant"},"loading.."):r.a.createElement("button",{className:"dormant"},(null===(e=l.location)||void 0===e?void 0:e.city)?l.location.city+", "+l.location.country:"Give Location Access"),l.location?r.a.createElement("button",{onClick:function(){return function(e,t){v.a.set("hasInitialised",!0),v.a.set("preferences",Object(k.a)({},t));for(var a=[],n={Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n"},r=6;r>=0;r--)a.push(Object(k.a)({},n));a[a.length-1].date=(new Date).toLocaleDateString(),v.a.set("stati",a),e({type:"INITIALISE_SUCCESS",source:"reg.js",payload:{preferences:t,stati:a}})}(t,l)}},"Save"):null)))}function F(e){var t=e.modalIsOpen,a=e.toggle,c=Object(n.useContext)(N),l=c.dispatch,o=c.state.preferences,s=Object(n.useState)(o),u=Object(i.a)(s,2),m=u[0],d=u[1],p=function(e){d(Object(k.a)({},m,Object(O.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(D.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal settings-modal",overlayClassName:"modal-overlay settings-modal-overlay"},r.a.createElement("div",{className:"heading"},"Preferences"),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Timing"),r.a.createElement("select",{className:"slct input",name:"calcMethod",onChange:p,value:m.calcMethod},_.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)})))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Theme"),r.a.createElement("select",{className:"slct input",name:"theme",onChange:p,value:m.theme},r.a.createElement("option",{value:"dark"},"Dark"),r.a.createElement("option",{value:"light"},"Light"),r.a.createElement("option",{value:"auto"},"Auto"))),r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},"Discard"),r.a.createElement("button",{className:"btn primary clickable",onClick:function(){!function(e,t){e({type:"EDIT_PREFERENCES",payload:{preferences:Object(k.a)({},t)}}),v.a.set("preferences",t)}(l,m),a(!1)}},"Save")))}D.a.setAppElement("body");var W=function(){var e,t=Object(n.useContext)(N).state,a=t.hasInitialised,c=t.preferences,l=t.timings,o=r.a.useState(!1),s=Object(i.a)(o,2),u=s[0],m=s[1];if(!a)return r.a.createElement(U,null);var d=(new Date).getHours()+":"+(new Date).getMinutes();return e="auto"===c.theme?P(d,null===l||void 0===l?void 0:l.Sunrise)&&P(null===l||void 0===l?void 0:l.Sunset,d)?"light":"dark":c.theme,r.a.createElement("div",{className:"App ".concat(e||"dark","-theme")},r.a.createElement("div",{style:{color:"white"},id:"header"},r.a.createElement("h1",null,"Prayer Journal")),u?r.a.createElement(F,{toggle:m,modalIsOpen:u}):null,r.a.createElement("div",{className:"main"},r.a.createElement(T,null),r.a.createElement(M,{calcMethod:c.calcMethod,currTime:d,location:c.location})),r.a.createElement("div",{className:"side"},r.a.createElement(y,{text:c.location.city+", "+c.location.country},r.a.createElement(g.a,{icon:h.d})),r.a.createElement(y,{text:"Preferences",onClick:function(){return m(!0)}},r.a.createElement(g.a,{icon:h.c})),r.a.createElement(E,null)))},Y=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function G(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null,r.a.createElement(W,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/prayerjournal",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/prayerjournal","/service-worker.js");Y?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):G(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):G(t,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.e3307de6.chunk.js.map