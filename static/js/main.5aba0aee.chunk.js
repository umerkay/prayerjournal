(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,a){},106:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(27),c=a.n(l),i=(a(64),a(5)),s=(a(65),a(16)),o=a(7),u=a(13),m=a.n(u),d=(a(77),a(14)),p=a.n(d),f=a(17),h=a(8),v=a.n(h),g={hasInitialised:v.a.get("hasInitialised"),preferences:v.a.get("preferences"),timings:v.a.get("timings"),isAuthenticated:v.a.get("isAuthenticated")},y=Object(n.createContext)(g),E=y.Provider,b=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"INITIALISE_SUCCESS":return Object(o.a)({},e,{hasInitialised:!0,preferences:t.payload.preferences,stati:t.payload.stati});case"INITIALISE_UNDO":return{hasInitialised:!1};case"AUTH_STATE_CHANGED":return Object(o.a)({},e,{user:t.payload.user,isAuthenticated:t.payload.isAuthenticated});case"STATI_UPDATED":case"SYNC_STATI_DATE":case"EDIT_PRAYER_STATUS":return Object(o.a)({},e,{stati:t.payload.stati});case"EDIT_PREFERENCES":return Object(o.a)({},e,{preferences:t.payload.preferences});case"SET_TIMINGS":return Object(o.a)({},e,{timings:t.payload.timings});default:return e}}),g),l=Object(i.a)(a,2),c=l[0],s=l[1];return r.a.createElement(E,{value:{state:c,dispatch:s}},t)},O=(a(89),a(18));a(50),a(51);function N(e,t){var a=e.split(",");return{Fajr:a[0],Zuhr:a[1],Asr:a[2],Maghrib:a[3],Isha:a[4],timestamp:new Date(parseInt(a[5])).toISOString()}}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00:01";return parseInt(e.split(":")[0])>parseInt(t.split(":")[0])||parseInt(e.split(":")[0])===parseInt(t.split(":")[0])&&parseInt(e.split(":")[1])>parseInt(t.split(":")[1])}var w=a(52),k=(a(99),a(100),w.initializeApp({apiKey:"AIzaSyCkyFa5ag_ck0xsIEAvtp24FfZOllfiPvY",authDomain:"prayer-journal-e2e93.firebaseapp.com",databaseURL:"https://prayer-journal-e2e93.firebaseio.com",projectId:"prayer-journal-e2e93",storageBucket:"prayer-journal-e2e93.appspot.com",messagingSenderId:901455867465}));k.firestore().enablePersistence();var j=k,I={calcMethod:1,theme:"dark",format:"12"},D=function(){var e=Object(f.a)(p.a.mark((function e(t,a,n){var r,l,c,i,s,u,m,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.additionalUserInfo.isNewUser){e.next=12;break}if((r=[].concat(Object(O.a)((v.a.get("abandonedStati")||[]).map((function(e){return N(e)}))),Object(O.a)(v.a.get("stati")||[])))&&0!==r.length)r.forEach((function(e){return e.unixTimestamp=new Date(e.timestamp||e.date).getTime()}));else for(r=[],l={Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n"},c=(new Date).getTime(),i=6;i>=0;i--)s=new Date(c-864e5*i),r.push(Object(o.a)({},l,{timestamp:s.toISOString(),unixTimestamp:s.getTime()}));return(u=v.a.get("preferences"))||(u=Object(o.a)({},I)),u.location=n,m=j.firestore().batch(),d=j.firestore().collection("users").doc(a.user.uid),r.forEach((function(e){m.set(d.collection("stati").doc(new Date(e.unixTimestamp).toDateString()),e)})),m.set(d,{preferences:u},{merge:!0}),e.next=12,m.commit();case 12:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),C=function(e,t,a){var n=[],r=new Date,l=new Date(t[t.length-1].timestamp||t[t.length-1].date),c=function(e,t){var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(l,r);if(!(c<=0)){for(var i=1;i<=c;i++){var s=new Date(l.getTime()+864e5*i).toISOString();n.push({Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n",timestamp:s,unixTimestamp:new Date(s).getTime()})}var o=j.firestore().batch(),u=j.firestore().collection("users").doc(a.uid);n.forEach((function(e){o.set(u.collection("stati").doc(new Date(e.unixTimestamp).toDateString()),e)})),o.commit()}},T=function(e,t,a,n){j.firestore().collection("users").doc(e.uid).collection("stati").doc(t).update(Object(s.a)({},a,n))},A=function(e,t){t.Zuhr=t.Dhuhr,e({type:"SET_TIMINGS",payload:{timings:t}}),v.a.set("timings",t)},x=a(36),_=a.n(x);a(102);function P(e){return e.msg?r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{className:"loading"+(e.bright?" bright":" dark"),width:e.width||"50px",src:_.a,alt:"",style:e.style}),r.a.createElement("div",{className:""},this.props.msg)):r.a.createElement("div",{className:"loading-container"+(e.mini?" mini":"")},r.a.createElement("img",{className:"loading"+(e.bright?" bright":" dark"),width:e.width||"50px",src:_.a,alt:"",style:e.style}))}var M=a(15),F=a.n(M);function U(e){var t=e.onFinal,a=e._countryID,l=e._stateID,c=e._cityID,s=e.className,u=F.a.getAllCountries(),m=Object(n.useState)(a?F.a.getStatesOfCountry(a):null),d=Object(i.a)(m,2),p=d[0],f=d[1],h=Object(n.useState)(l?F.a.getCitiesOfState(l):null),v=Object(i.a)(h,2),g=v[0],y=v[1],E=Object(n.useState)({_countryID:a,_stateID:l,_cityID:c}),b=Object(i.a)(E,2),O=b[0],N=b[1],S=function(e){var a=e.target;if("country"===a.name)N(Object(o.a)({},O,{country:a.options[a.selectedIndex].innerHTML,_countryID:a.value})),f(F.a.getStatesOfCountry(a.value)),y(null);else if("state"===a.name)N(Object(o.a)({},O,{country:F.a.getCountryById(O._countryID).name,state:a.options[a.selectedIndex].innerHTML,_stateID:a.value})),y(F.a.getCitiesOfState(a.value));else if("city"===a.name){var n=Object(o.a)({},O,{country:F.a.getCountryById(O._countryID).name,state:F.a.getStateById(O._stateID).name,city:a.options[a.selectedIndex].innerHTML,_cityID:a.value});N(n),t({target:{name:"location",value:n}})}};return r.a.createElement(r.a.Fragment,null,r.a.createElement("select",{value:O._countryID,name:"country",id:"country",className:"slct "+(s||""),onChange:S},r.a.createElement("option",null,"Select Country"),u.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),p?r.a.createElement("select",{value:O._stateID,name:"state",id:"state",className:"slct",style:{marginTop:"0.25rem"},onChange:S},r.a.createElement("option",null,"Select State"),p.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))):null,g?r.a.createElement("select",{value:O._cityID,name:"city",id:"city",className:"slct",style:{marginTop:"0.25rem"},onChange:S},r.a.createElement("option",null,"Select City"),g.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))):null)}var L=a(53),R=a(54),W=a(57),H=a(58),G=(a(106),function(e){Object(H.a)(a,e);var t=Object(W.a)(a);function a(){var e;Object(L.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={value:null},e.handleChange=function(t){var a=t.target.value;e.setState({value:a}),e.props.onChange&&e.props.onChange(a)},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.value||this.props.options[0];this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"optionSwitch "+(this.props.className||"")},this.props.options.map((function(t,a){return r.a.createElement("label",{key:a,className:"optionContainer"},r.a.createElement("input",{className:"option",type:"radio",checked:e.state.value===t,value:t,onChange:e.handleChange}),r.a.createElement("span",null,t))})))}}]),a}(n.Component));function B(e){var t=e.isFor,a=e.formUpdated,n=e.formState,l=e.disabled;return r.a.createElement("div",{className:"sign-module"},r.a.createElement("label",{disabled:l,className:"sign-label",htmlFor:t},t.replace(/^./,t[0].toUpperCase())),r.a.createElement("input",{disabled:l,className:"sign-input",required:!0,name:t,onChange:a,value:n[t],type:t}))}var Y=a(55),q=a.n(Y),Z=["Shia Ithna-Ansari","University of Islamic Sciences, Karachi","Islamic Society of North America","Muslim World League","Umm Al-Qura University, Makkah","Egyptian General Authority of Survey","Institute of Geophysics, University of Tehran","Gulf Region","Kuwait","Qatar","Majlis Ugama Islam Singapura, Singapore","Union Organization islamic de France","Diyanet \u0130\u015fleri Ba\u015fkanl\u0131\u011f\u0131, Turkey","Spiritual Administration of Muslims of Russia"];function Q(){var e,t,a,l=Object(n.useContext)(y),c=l.dispatch,u=l.state,m=u.preferences,d=u.hasInitialised,h=(null===m||void 0===m?void 0:m.location)||null,v=Object(n.useState)({location:h}),g=Object(i.a)(v,2),E=g[0],b=g[1],O=Object(n.useState)("SignIn"),N=Object(i.a)(O,2),S=N[0],w=N[1],k=Object(n.useState)(d?{message:"Update: This App has been connected to a database (finally). To continue, please SIGNUP. The data on your device will be merged into the new account and synced with the database."}:null),I=Object(i.a)(k,2),C=I[0],T=I[1],A=Object(n.useState)(!1),x=Object(i.a)(A,2),_=x[0],M=x[1],F=function(e){var t=e.target;b(Object(o.a)({},E,Object(s.a)({},t.name,t.value)))},L=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(c,t,E.location);case 2:M(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){T(e),M(!1)};Object(n.useEffect)((function(){if("Google"===S){M(!0);var e=new q.a.auth.GoogleAuthProvider;j.auth().signInWithPopup(e).then(L).catch(R)}}),[S]);var W=function(e,t,a){j.auth().signInWithEmailAndPassword(e,t).then(L).catch(R)},H=function(e,t,a){e&&t&&a&&a.city?j.auth().createUserWithEmailAndPassword(e,t).then(L).catch(R):R({message:"Please fill all the fields"})};return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"card register-card"},r.a.createElement("div",{className:"heading"},"Hey there!",r.a.createElement("br",null)),r.a.createElement(G,{onChange:w,options:["SignUp","Google","SignIn"]}),C?r.a.createElement("div",{className:"error"},C.message):null,"SignUp"===S||"SignIn"===S?r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),M(!0);var t=E.password,a=E.email,n=E.location;"SignIn"===S?W(a,t):"SignUp"===S&&H(a,t,n)},className:"sign-modules"},r.a.createElement(B,{disabled:_,isFor:"email",formUpdated:F,formState:E}),r.a.createElement(B,{disabled:_,isFor:"password",formUpdated:F,formState:E}),"SignUp"===S?r.a.createElement("div",{className:"sign-module"},r.a.createElement("label",{className:"sign-label",htmlFor:"location"},"Location"),r.a.createElement("div",null,r.a.createElement(U,{onFinal:F,_countryID:null===E||void 0===E||null===(e=E.location)||void 0===e?void 0:e._countryID,_stateID:null===E||void 0===E||null===(t=E.location)||void 0===t?void 0:t._stateID,_cityID:null===E||void 0===E||null===(a=E.location)||void 0===a?void 0:a._cityID}))):null,_?null:r.a.createElement("input",{type:"Submit",onChange:function(){},className:"btn sign primary clickable",value:S})):null,_?r.a.createElement(P,{style:{marginTop:"1rem"},bright:!0}):null))}var J=a(9),z=a(10);function K(e){var t=e.modalIsOpen,a=e.toggle,l=Object(n.useContext)(y),c=(l.dispatch,l.state),u=c.preferences,d=c.user,p=Object(n.useState)(u),f=Object(i.a)(p,2),h=f[0],v=f[1],g=Object(n.useState)(!1),E=Object(i.a)(g,2),b=E[0],O=E[1],N=u.location,S=function(e){O(!0),v(Object(o.a)({},h,Object(s.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(m.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal settings-modal "+u.theme,overlayClassName:"modal-overlay settings-modal-overlay"},r.a.createElement("div",null,r.a.createElement("div",{className:"heading"},(null===d||void 0===d?void 0:d.displayName)||(null===d||void 0===d?void 0:d.email)),r.a.createElement("div",{style:{marginBottom:"2rem"},className:"preference"},r.a.createElement("label",null,"Account"),r.a.createElement("div",null,r.a.createElement("button",{className:"btn clickable primary",onClick:function(){window.confirm("Are you sure?")&&j.auth().signOut()}},"Sign Out"))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Timing"),r.a.createElement("select",{className:"slct input",name:"calcMethod",onChange:S,value:h.calcMethod},Z.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)})))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Theme"),r.a.createElement("select",{className:"slct input",name:"theme",onChange:S,value:h.theme},r.a.createElement("option",{value:"dark"},"Dark"),r.a.createElement("option",{value:"light"},"Light"),r.a.createElement("option",{value:"auto"},"Auto"))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Format"),r.a.createElement("select",{className:"slct input",name:"timeFormat",onChange:S,value:h.timeFormat},r.a.createElement("option",{value:"24"},"24 Hour Clock"),r.a.createElement("option",{value:"12"},"12 Hour Clock"))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Location"),r.a.createElement("div",null,r.a.createElement(U,{onFinal:S,_countryID:N._countryID,_stateID:N._stateID,_cityID:N._cityID}))),r.a.createElement("div",{className:"submitContainer",style:{position:"sticky",bottom:"0px"}},r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},r.a.createElement(J.a,{className:"icon",icon:z.j})," ",r.a.createElement("span",null,"Nevermind")),r.a.createElement("button",{className:"btn"+(b?" primary clickable":""),onClick:b?function(){!function(e,t,a){j.firestore().collection("users").doc(a.uid).update({preferences:Object(o.a)({},t)})}(0,h,d),a(!1)}:null},r.a.createElement(J.a,{className:"icon",icon:z.h})," ",r.a.createElement("span",null,"Save"))))))}m.a.setAppElement("body");a(116);function $(e){var t=e.modalIsOpen,a=e.toggle,n=e.theme;return r.a.createElement("div",null,r.a.createElement(m.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal about-modal "+n,overlayClassName:"modal-overlay settings-modal-overlay"},r.a.createElement("div",null,r.a.createElement("div",{className:"whatsnew"},r.a.createElement("div",{className:"title"},"What's New?"),r.a.createElement("ul",null,r.a.createElement("span",{style:{fontWeight:"bold"}},"13 May, 2020..."),r.a.createElement("li",null,"Database support!"),r.a.createElement("li",null,"Your data will now be uploaded to a database, and synced in real time. You can sign in to the same account on multiple devices, of any type, and the data will sync across them in real time."),r.a.createElement("li",null,"The history feature allows you to view recorded data from the past."))),"Prayer Journal allows you to record the statuses of your prayers as you offer them. A Quranic verse is displayed in the Quran Card, fetched from a third party API, which is refreshed once a day. Prayer timings are fetched according to your location from another external API. This application is stricly for pupils following Islam as their religion, and supports the five compulsory daily prayers. ALL of the past and current data is saved in a database and is synced between your devices.",r.a.createElement("br",null),"This application has been built by, and is maintained by the entity represented by ",r.a.createElement("a",{href:"https://umerkay.github.io",target:"_blank",rel:"noopener noreferrer"},"umerkay"),". This is primarily a personal project that is made available for public use on Github Pages.",r.a.createElement("br",null),"This is a Progressive Web App (PWA) and can work offline; this same link works both for desktop browsers and on phone browsers. Browsers supporting PWA installations, for example Chrome, allow this to be locally installed on desktops and phones alike. Your data, as of now, is stored locally and I am yet to add mechanism for syncing data between devices, for example between your desktop and your phone.",r.a.createElement("br",null),"If you have suggestions and/or requests for this app, you can open issues on the Github repository. If you do not know how to do that, send those to me personally (contact information is available on my portfolio)."),r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},r.a.createElement("span",null,"Okay"))))}m.a.setAppElement("body");a(117);function V(e){return r.a.createElement("div",{id:"header-mobile"},e.children)}a(118);var X=function(e){return e.timestamp?(new Date).toDateString()!==new Date(e.timestamp).toDateString():e.date!==(new Date).toLocaleDateString(e.locale)};function ee(){var e=r.a.useState(v.a.get("verse")||{isLoading:!0}),t=Object(i.a)(e,2),a=t[0],l=t[1],c=r.a.useState(null),s=Object(i.a)(c,2),o=s[0],u=s[1],m=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,r,c,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>0&&void 0!==i[0]&&i[0])&&!X(a)){e.next=24;break}return l({isLoading:!0}),e.prev=3,e.next=6,fetch("https://cors-anywhere.herokuapp.com/https://salamquran.com/en/api/v6/aya/day");case 6:if((t=e.sent).ok){e.next=9;break}throw new Error(t);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(3),l({isLoading:!1}),u("The Quran API is unreachable right now"),e.abrupt("return");case 16:return e.next=18,t.json();case 18:n=e.sent.result,r=n.translate,c={reference:n.sura_detail.tname+" "+r.sura+":"+r.aya,sura:r.sura,aya:r.aya,text:r.text,isLoading:!1,arabic:n.text,surahName:n.sura_detail.tname,timestamp:(new Date).toISOString()},u(null),v.a.set("verse",c),l(c);case 24:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){m()}),[]),r.a.createElement("div",{className:"card quran-card"},o&&!a.isLoading?r.a.createElement("div",{className:"error"},r.a.createElement(J.a,{className:"icon",icon:z.d}),r.a.createElement("span",null,o)):a.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference",style:{width:150}},r.a.createElement("div",{className:"filler",style:{animationDuration:"3s"}})),r.a.createElement(P,{dark:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference"},"Quran, ",a.reference),r.a.createElement("div",{className:"verse arabic"},a.arabic),r.a.createElement("div",{className:"verse"},'"',a.text,'"')),r.a.createElement("div",{className:"more"},o&&!a.isLoading?r.a.createElement("button",{className:"more",onClick:m,style:{width:"120px",textAlign:"center"}},"Retry"):a.isLoading?r.a.createElement("button",{className:"more",style:{width:"120px",textAlign:"center"}},r.a.createElement("span",{className:"filler"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{style:{cursor:"pointer",marginRight:"0.5rem"},className:"more clickable",onClick:function(){return m(!0)}},r.a.createElement("span",null,r.a.createElement(J.a,{icon:z.i}))),r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://quran.com/".concat(a.sura,"/").concat(a.aya),className:"more clickable"},"Continue Reading ",r.a.createElement("span",null,r.a.createElement(J.a,{icon:z.a}))))))}a(119);function te(e){return r.a.createElement("div",{className:"card general-card "+(e.onClick?" clickable ":"")+(e.className||""),onClick:e.onClick},r.a.createElement("span",null,e.children),r.a.createElement("span",null,e.text))}a(120);var ae=["Fajr","Zuhr","Asr","Maghrib","Isha"];a(121);function ne(e){var t=e.modalIsOpen,a=e.toggle,l=e.save,c=e.prayerState,s=e.theme,u=Object(n.useState)(Object(o.a)({},c)),d=Object(i.a)(u,2),p=d[0],f=d[1],h=["Not Sure","Timely","Delayed","Missed","Exempted"];return r.a.createElement("div",null,r.a.createElement(m.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal prayer-modal "+s,overlayClassName:"modal-overlay prayer-modal-overlay"},r.a.createElement("div",{className:"heading"},"Record the status of",r.a.createElement("select",{style:{marginBottom:0},value:ae.indexOf(p.name),className:"slct",onChange:function(e){f(Object(o.a)({},p,{name:ae[e.target.value]}))}},ae.map((function(e,t){return r.a.createElement("option",{name:e,value:t,key:e},e)}))),"Prayer",c.timestamp?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("span",null,"for ",new Date(c.timestamp).toDateString().slice(4))):null),["n","o","d","m","ex"].map((function(e,t){return r.a.createElement("button",{key:e,style:{color:"n"===e?"black":"white"},className:"btn clickable charButton "+e,onClick:function(){l(p,e),a(!1)}},r.a.createElement("span",null,h[t]))}))))}m.a.setAppElement("body");a(122);var re=a(56),le=a.n(re);function ce(e){var t=e.modalIsOpen,a=e.toggle,l=Object(n.useContext)(y).state,c=l.preferences,s=l.user,o=Object(n.useState)(null),u=Object(i.a)(o,2),d=u[0],p=u[1],f=Object(n.useState)(!1),h=Object(i.a)(f,2),v=h[0],g=h[1],E=Object(n.useState)(null),b=Object(i.a)(E,2),O=b[0],N=b[1],S=Object(n.useState)(null),w=Object(i.a)(S,2),k=w[0],I=w[1];Object(n.useEffect)((function(){d&&D()}),[d]);var D=function(e){g(!0),N(null),j.firestore().collection("users").doc(s.uid).collection("stati").where("unixTimestamp",">=",d[0].getTime()).where("unixTimestamp","<=",d[1].getTime()).get().then((function(e){var t=e.docs.map((function(e){return e.data()}));if(g(!1),0===t.length)return N("There are no records in this range of dates"),void I(null);I(t)})).catch((function(e){console.log(e),g(!1),I(null),N(e.message)}))};return r.a.createElement("div",null,r.a.createElement(m.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal stati-modal "+c.theme,overlayClassName:"modal-overlay stati-modal-overlay"},r.a.createElement("div",{className:"heading"},"Select History Range"),r.a.createElement("div",{className:"slctHolder"},r.a.createElement(le.a,{onChange:p,value:d})),v?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spacer"}),r.a.createElement(P,{bright:"dark"===c.theme})):null,O?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"spacer"}),r.a.createElement("div",{className:"m error"},O)):null,k?r.a.createElement("div",{className:"dataDisplay"},r.a.createElement("span",null),ae.map((function(e){return r.a.createElement("span",{key:e},e)})),k.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{style:{textAlign:"left"}},new Date(e.unixTimestamp).toDateString()),r.a.createElement("span",{className:"status "+e.Fajr}),r.a.createElement("span",{className:"status "+e.Zuhr}),r.a.createElement("span",{className:"status "+e.Asr}),r.a.createElement("span",{className:"status "+e.Maghrib}),r.a.createElement("span",{className:"status "+e.Isha}))}))):null))}function ie(e){return(new Date).toDateString()===new Date(e).toDateString()}function se(e){var t=Object(n.useContext)(y),a=(t.dispatch,t.state),l=a.stati,c=a.user,s=a.preferences,o=Object(n.useState)(!1),u=Object(i.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),h=f[0],v=f[1],g=Object(n.useState)({}),E=Object(i.a)(g,2),b=E[0],N=E[1];if(!l)return r.a.createElement("div",{className:"card weekly-card dark loading"},r.a.createElement(P,{bright:!0}));(function(e){var t=e[e.length-1];return t.timestamp?(new Date).toDateString()!==new Date(t.timestamp).toDateString():(new Date).toLocaleDateString(t.locale)!==t.date})(l)&&C(0,l,c);var S=["S","M","T","W","T","F","S"],w=Object(O.a)(l),k=ae.map((function(e){return w.map((function(t){return t[e]}))})),j=w.map((function(e){return S[new Date(e.unixTimestamp).getDay()]}));return r.a.createElement("div",{className:"card weekly-card dark"},m?r.a.createElement(ne,{theme:s.theme,save:function(e,t){!function(e,t,a){T(c,w[a].uid,e,t)}(e.name,t,b.dayIndex)},prayerState:b,modalIsOpen:m,toggle:d}):null,h?r.a.createElement(ce,{theme:s.theme,modalIsOpen:h,toggle:v}):null,r.a.createElement("div",{className:"heading",style:{position:"relative"}},r.a.createElement("span",null,r.a.createElement(J.a,{icon:z.b}),r.a.createElement("span",{style:{marginLeft:"1rem",marginRight:"1rem"}},"This Week"),r.a.createElement(J.a,{icon:z.e,className:"icon",onClick:function(){return v(!0)}}))),r.a.createElement("div",{className:"grid",style:{gridTemplateColumns:"repeat(".concat(j.length+1,", 1fr)")}},r.a.createElement("span",null),l.map((function(e,t){var a=new Date(e.unixTimestamp);return r.a.createElement("span",{key:e.uid,className:"date"+(ie(w[t].timestamp||w[t].date)?" today primary":"")},a.getDate(),"/",a.getMonth())})),r.a.createElement("span",null),j.map((function(e,t){return r.a.createElement("span",{key:e+"."+t,className:"day"+(ie(w[t].timestamp||w[t].date)?" today primary":"")},e)})),k.map((function(e){var t=ae[k.indexOf(e)];return[r.a.createElement("span",{className:"prayerName",key:t},r.a.createElement("span",null,t)),e.map((function(e,a){return r.a.createElement("span",{key:t+"."+a,className:"status "+e,onClick:function(){N({name:t,status:e,dayIndex:a,timestamp:w[a].unixTimestamp}),d(!0)}})}))]}))),r.a.createElement("div",{className:"key"},r.a.createElement("span",null,r.a.createElement("div",{className:"status o dormant"}),"Timely"),r.a.createElement("span",null,r.a.createElement("div",{className:"status d dormant"}),"Delayed"),r.a.createElement("span",null,r.a.createElement("div",{className:"status m dormant"}),"Missed")))}m.a.setAppElement("body");a(140);function oe(e){var t=e.currTime,a=Object(n.useState)(!1),l=Object(i.a)(a,2),c=l[0],s=l[1],u=Object(n.useState)({}),m=Object(i.a)(u,2),d=m[0],h=m[1],v=Object(n.useState)(!0),g=Object(i.a)(v,2),E=g[0],b=g[1],O=Object(n.useState)(null),N=Object(i.a)(O,2),w=N[0],k=N[1],j=Object(n.useContext)(y),I=j.state,D=I.preferences,C=I.timings,x=I.stati,_=I.user,P=j.dispatch,M=D||{},F=M.location,U=M.calcMethod,L=M.timeFormat;Object(n.useEffect)((function(){if(!D)return b(!0),void console.log("llll");(function(){var e=Object(f.a)(p.a.mark((function e(){var t,a,n,r,l,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U===(null===C||void 0===C?void 0:C.calcMethod)&&C&&(null===C||void 0===C?void 0:C.date)===(new Date).toDateString()&&(null===C||void 0===C||null===(t=C.location)||void 0===t?void 0:t.city)===F.city&&(null===C||void 0===C||null===(a=C.location)||void 0===a?void 0:a.country)===F.country){e.next=27;break}return b(!0),n=F.city,r=F.country,e.prev=3,e.next=6,fetch("https://api.aladhan.com/v1/timingsByCity?city=".concat(n,"&country=").concat(r,"&method=").concat(U,"&school=1"));case 6:if((l=e.sent).ok){e.next=9;break}throw new Error(l);case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(3),b(!1),k("Unable to update Prayer timings right now"),e.abrupt("return");case 16:return e.next=18,l.json();case 18:c=e.sent,(i=c.data.timings).location=Object(o.a)({},F),i.date=(new Date).toDateString(),i.calcMethod=U,A(P,i),b(!1),e.next=28;break;case 27:b(!1);case 28:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}})()()}),[U,P,F,C,D]);return r.a.createElement(r.a.Fragment,null,!E&&C&&x?r.a.createElement("div",{className:"prayers-container"},ae.map((function(e,a){return r.a.createElement(ue,{key:e,name:e,time:"12"===L?(n=C[e],(n=n.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[n]).length>1&&((n=n.slice(1))[5]=+n[0]<12?" AM":" PM",n[0]=+n[0]%12||12),n.join("")):C[e],timePassed:S(t,C[e]),status:x[x.length-1][e],onClick:function(){h({name:e,status:x[x.length-1][e]}),s(!0)}});var n}))):r.a.createElement("div",{className:"prayers-container"},ae.map((function(e,t){return r.a.createElement(ue,{status:"n",loading:!0,key:e})}))),w?r.a.createElement("div",{className:"card error"},r.a.createElement(J.a,{className:"icon",icon:z.d}),r.a.createElement("span",null,w),r.a.createElement("div",{className:"delete",onClick:function(){return k(null)}},r.a.createElement(J.a,{icon:z.j}))):null,c?r.a.createElement(ne,{theme:D.theme,save:function(e,t){T(_,x[x.length-1].uid,e.name,t)},prayerState:d,modalIsOpen:c,toggle:s}):null)}function ue(e){var t={o:function(t){return"You prayed ".concat(e.name," Prayer on time")},m:function(t){return"You missed ".concat(e.name," Prayer")},n:function(t){return e.timePassed,"".concat(e.time," Onwards ").concat(e.name," Prayer")},d:function(t){return"You prayed ".concat(e.name," Prayer at a delayed time")},ex:function(t){return"You were exempted from offering ".concat(e.name," Prayer")}};return r.a.createElement("button",{onClick:"n"!==e.status||e.timePassed?e.onClick:null,className:"card prayer-card "+e.status+("n"!==e.status||e.timePassed?"":" future")},e.loading?r.a.createElement("span",{className:"filler"}):t[e.status]?t[e.status](e):"Oops, Something went horribly wrong.")}function me(e){var t=e.currTime,a=e.setAboutModal,l=e.setSettingsModal,c=Object(n.useContext)(y).state.preferences,i=(null===c||void 0===c?void 0:c.location)||null;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"main"},r.a.createElement(se,null),r.a.createElement(oe,{currTime:t})),r.a.createElement("div",{className:"side"},r.a.createElement(ee,null),r.a.createElement(te,{text:i?(null===i||void 0===i?void 0:i.city)+", "+(null===i||void 0===i?void 0:i.country):""},r.a.createElement(J.a,{icon:z.g}),i?null:r.a.createElement("div",{className:"filler",style:{display:"inline-block",width:"60%"}})),r.a.createElement(te,{className:"only-desktop",text:"Preferences",onClick:function(){return l(!0)}},r.a.createElement(J.a,{icon:z.c})),r.a.createElement(te,{text:"About & What's New",onClick:function(){return a(!0)}},r.a.createElement(J.a,{icon:z.f}))))}var de=function(){var e=Object(n.useContext)(y),t=e.state,a=e.dispatch,l=t.preferences,c=t.timings,s=t.user,u=t.isAuthenticated,m=r.a.useState(!1),d=Object(i.a)(m,2),p=d[0],f=d[1],h=r.a.useState(!1),g=Object(i.a)(h,2),E=g[0],b=g[1];Object(n.useEffect)((function(){var e=function(e,t){var a=[];return a.push(j.auth().onAuthStateChanged((function(n){n?(a.push(j.firestore().collection("users").doc(n.uid).collection("stati").orderBy("unixTimestamp","desc").limit(7).onSnapshot((function(t){e({type:"STATI_UPDATED",payload:{stati:t.docs.map((function(e){return Object(o.a)({},e.data(),{uid:e.id})})).reverse()}})}),console.log)),a.push(j.firestore().collection("users").doc(n.uid).onSnapshot((function(t){var a=t.get("preferences");e({type:"EDIT_PREFERENCES",payload:{preferences:a}}),v.a.set("preferences",a)}),console.log)),e({type:"AUTH_STATE_CHANGED",payload:{user:n,isAuthenticated:!0}}),v.a.set("isAuthenticated",!0)):(e({type:"AUTH_STATE_CHANGED",payload:{user:null,isAuthenticated:!1}}),v.a.set("isAuthenticated",!1)),t(n)}))),a}(a,(function(){f(!1)}));return function(){return e.forEach((function(e){return e()}))}}),[a]);var O=(new Date).getHours()+":"+(new Date).getMinutes();return r.a.createElement("div",{className:"App ".concat("auto"===(null===l||void 0===l?void 0:l.theme)?S(O,null===c||void 0===c?void 0:c.Sunrise)&&S(null===c||void 0===c?void 0:c.Sunset,O)?"light":"dark":null===l||void 0===l?void 0:l.theme,"-theme")},r.a.createElement(V,null,s?r.a.createElement(J.a,{icon:z.c,className:"icon",onClick:function(){return f(!0)}}):null,r.a.createElement("div",{className:"text"},"Prayer Journal")),s?r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{currTime:O,setSettingsModal:f,setAboutModal:b}),p?r.a.createElement(K,{toggle:f,modalIsOpen:p}):null,E?r.a.createElement($,{theme:null===l||void 0===l?void 0:l.theme,toggle:b,modalIsOpen:E}):null):u?r.a.createElement("div",{className:"centerfull"},r.a.createElement(P,{bright:"dark"===(null===l||void 0===l?void 0:l.theme)})):r.a.createElement(Q,null))},pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function fe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null,r.a.createElement(de,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/prayerjournal",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/prayerjournal","/service-worker.js");pe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):fe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):fe(t,e)}))}}()},36:function(e,t,a){e.exports=a.p+"static/media/loading.7d02b50b.gif"},59:function(e,t,a){e.exports=a(142)},64:function(e,t,a){},65:function(e,t,a){},77:function(e,t,a){},89:function(e,t,a){}},[[59,1,2]]]);
//# sourceMappingURL=main.5aba0aee.chunk.js.map