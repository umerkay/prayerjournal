(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/loading.7d02b50b.gif"},25:function(e,t,a){e.exports=a(69)},30:function(e,t,a){},31:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),i=(a(30),a(3)),o=(a(31),a(9)),s=a.n(o),u=a(15),m=(a(33),a(19)),d=a.n(m);a(34);function p(e){return e.msg?r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{className:"loading"+(e.bright?" bright":" dark"),width:e.width||"50px",src:d.a,alt:""}),r.a.createElement("div",{className:""},this.props.msg)):r.a.createElement("div",{className:"loading-container"},r.a.createElement("img",{className:"loading"+(e.bright?" bright":" dark"),width:e.width||"50px",src:d.a,alt:""}))}var f=a(6),E=a.n(f),v=a(5),g=a(4),h=function(e){return e.timestamp?(new Date).toDateString()!==new Date(e.timestamp).toDateString():e.date!==(new Date).toLocaleDateString(e.locale)};function y(){var e=r.a.useState(E.a.get("verse")||{isLoading:!0}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=r.a.useState(null),o=Object(i.a)(l,2),m=o[0],d=o[1],f=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h(a)){e.next=23;break}return c({isLoading:!0}),e.prev=2,e.next=5,fetch("https://cors-anywhere.herokuapp.com/https://salamquran.com/en/api/v6/aya/day");case 5:if((t=e.sent).ok){e.next=8;break}throw new Error(t);case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(2),c({isLoading:!1}),d("The Quran API is unreachable right now"),e.abrupt("return");case 15:return e.next=17,t.json();case 17:n=e.sent.result,r=n.translate,l={reference:n.sura_detail.tname+" "+r.sura+":"+r.aya,sura:r.sura,aya:r.aya,text:r.text,isLoading:!1,arabic:n.text,surahName:n.sura_detail.tname,timestamp:(new Date).toISOString()},d(null),E.a.set("verse",l),c(l);case 23:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),r.a.createElement("div",{className:"card quran-card"},m&&!a.isLoading?r.a.createElement("div",{className:"error"},r.a.createElement(g.a,{className:"icon",icon:v.d}),r.a.createElement("span",null,m)):a.isLoading?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference",style:{width:150}},r.a.createElement("div",{className:"filler"})),r.a.createElement(p,{dark:!0})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reference"},"Quran, ",a.reference),r.a.createElement("div",{className:"verse arabic"},a.arabic),r.a.createElement("div",{className:"verse"},'"',a.text,'"')),r.a.createElement("div",{className:"more"},m&&!a.isLoading?r.a.createElement("button",{className:"more",onClick:f,style:{width:"120px",textAlign:"center"}},"Retry"):a.isLoading?r.a.createElement("button",{className:"more",style:{width:"120px",textAlign:"center"}},r.a.createElement("span",{className:"filler"})):r.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:"https://quran.com/".concat(a.sura,"/").concat(a.aya),className:"more clickable"},r.a.createElement("span",null," ",r.a.createElement(g.a,{icon:v.a})))))}a(50);function b(e){return r.a.createElement("div",{className:"card general-card "+(e.onClick?" clickable ":"")+(e.className||""),onClick:e.onClick},r.a.createElement("span",null,e.children),r.a.createElement("span",null,e.text))}var N=a(7),O=a(11),S=a(2),k={hasInitialised:E.a.get("hasInitialised"),preferences:E.a.get("preferences"),stati:E.a.get("stati"),timings:E.a.get("timings")},j=Object(n.createContext)(k),w=j.Provider,C=function(e){var t=e.children,a=Object(n.useReducer)((function(e,t){switch(t.type){case"INITIALISE_SUCCESS":return Object(S.a)({},e,{hasInitialised:!0,preferences:t.payload.preferences,stati:t.payload.stati});case"INITIALISE_UNDO":return{hasInitialised:!1};case"SYNC_STATI_DATE":case"EDIT_PRAYER_STATUS":return Object(S.a)({},e,{stati:t.payload.stati});case"EDIT_PREFERENCES":return Object(S.a)({},e,{preferences:t.payload.preferences});case"SET_TIMINGS":return Object(S.a)({},e,{timings:t.payload.timings});default:return e}}),k),c=Object(i.a)(a,2),l=c[0],o=c[1];return r.a.createElement(w,{value:{state:l,dispatch:o}},t)};a(51);var I=function(e,t){var a=Object(O.a)(t),n=new Date,r=new Date(t[t.length-1].timestamp||t[t.length-1].date),c=function(e,t){var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(r,n);if(console.log(c),!(c<=0)){for(var l=1;l<=c;l++)a.shift(),a.push({Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n",timestamp:new Date(r.getTime()+864e5*l).toISOString()});e({type:"SYNC_STATI_DATE",payload:{stati:a}}),E.a.set("stati",a)}},D=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.length-1,r=Object(O.a)(t);r[n]=Object(S.a)({},r[n],{},a),e({type:"EDIT_PRAYER_STATUS",payload:{stati:r}}),E.a.set("stati",r)},T=function(e,t){t.Zuhr=t.Dhuhr,e({type:"SET_TIMINGS",payload:{timings:t}}),E.a.set("timings",t)},x=["Fajr","Zuhr","Asr","Maghrib","Isha"];function A(e){var t=Object(n.useContext)(j),a=t.dispatch,c=t.state.stati;(function(e){var t=e[e.length-1];return t.timestamp?(new Date).toDateString()!==new Date(t.timestamp).toDateString():(new Date).toLocaleDateString(t.locale)!==t.date})(c)&&I(a,c);var l=["S","M","T","W","T","F","S"],i=["o","d","m","n"],o=x.map((function(e){return c.map((function(t){return t[e]}))})),s=new Date(c[c.length-1].timestamp||c[c.length-1].date).getDay(),u=l.splice(s+1);l=[].concat(Object(O.a)(u),Object(O.a)(l));return r.a.createElement("div",{className:"card weekly-card dark"},r.a.createElement("div",{className:"heading"}," ",r.a.createElement("span",null,r.a.createElement(g.a,{icon:v.b}))," ",r.a.createElement("span",null,"This Week")),r.a.createElement("div",{className:"grid"},r.a.createElement("span",null),l.map((function(e,t){return r.a.createElement("span",{key:e+"."+t,className:"day"+(a=c[t].timestamp||c[t].date,console.log((new Date).toDateString(),new Date(a).toDateString()),(new Date).toDateString()===new Date(a).toDateString()?" today primary":"")},e);var a})),o.map((function(e){var t=x[o.indexOf(e)];return[r.a.createElement("span",{className:"prayerName",key:t},r.a.createElement("span",null,t)),e.map((function(e,n){return r.a.createElement("span",{key:t+"."+n,className:"status "+e,onClick:function(){return function(e,t,n){t=i[(i.indexOf(t)+1)%i.length],D(a,c,Object(N.a)({},e,t),n)}(t,e,n)}})}))]}))),r.a.createElement("div",{className:"key"},r.a.createElement("span",null,r.a.createElement("div",{className:"status o dormant"}),"Timely"),r.a.createElement("span",null,r.a.createElement("div",{className:"status d dormant"}),"Delayed"),r.a.createElement("span",null,r.a.createElement("div",{className:"status m dormant"}),"Missed")))}a(52);var M=a(10),P=a.n(M);a(62);function L(e){var t=e.modalIsOpen,a=e.toggle,c=e.save,l=e.prayerState,o=Object(n.useState)(Object(S.a)({},l)),s=Object(i.a)(o,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],E=p[1];return r.a.createElement("div",null,r.a.createElement(P.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal prayer-modal",overlayClassName:"modal-overlay prayer-modal-overlay"},r.a.createElement("div",{className:"heading"},"Record the status of",r.a.createElement("select",{value:x.indexOf(u.name),className:"slct",onChange:function(e){m(Object(S.a)({},u,{name:x[e.target.value]})),E(!0)}},x.map((function(e,t){return r.a.createElement("option",{name:e,value:t,key:e},e)}))),"Prayer"),r.a.createElement("select",{name:"",id:"",value:u.status,className:"slct",onChange:function(e){m(Object(S.a)({},u,{status:e.target.value})),E(!0)}},r.a.createElement("option",{value:"n"},"Not sure"),r.a.createElement("option",{value:"o"},"Timely"),r.a.createElement("option",{value:"d"},"Delayed"),r.a.createElement("option",{value:"m"},"Missed")),r.a.createElement("div",null,r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},r.a.createElement(g.a,{className:"icon",icon:v.g})," ",r.a.createElement("span",null,"Discard")),r.a.createElement("button",{className:"btn"+(f?" primary clickable":""),onClick:f?function(){c(u),a(!1)}:null},r.a.createElement(g.a,{className:"icon",icon:v.f})," ",r.a.createElement("span",null,"Save")))))}function _(e){var t=e.currTime,a=Object(n.useState)(!1),c=Object(i.a)(a,2),l=c[0],o=c[1],m=Object(n.useState)({}),d=Object(i.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!0),h=Object(i.a)(E,2),y=h[0],b=h[1],O=Object(n.useState)(null),k=Object(i.a)(O,2),w=k[0],C=k[1],I=Object(n.useContext)(j),A=I.state,M=A.preferences,P=M.location,_=M.calcMethod,W=M.timeFormat,Y=A.timings,H=A.stati,q=I.dispatch;Object(n.useEffect)((function(){(function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,n,r,c,l,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_===(null===Y||void 0===Y?void 0:Y.calcMethod)&&Y&&(null===Y||void 0===Y?void 0:Y.date)===(new Date).toDateString()&&((null===Y||void 0===Y||null===(t=Y.location)||void 0===t?void 0:t.city)===P.city||(null===Y||void 0===Y||null===(a=Y.location)||void 0===a?void 0:a.country)===P.country)){e.next=28;break}return b(!0),n=P.city,r=P.country,console.log(n,r),e.prev=4,e.next=7,fetch("https://api.aladhan.com/v1/timingsByCity?city=".concat(n,"&country=").concat(r,"&method=").concat(_,"&school=1"));case 7:if((c=e.sent).ok){e.next=10;break}throw new Error(c);case 10:e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(4),b(!1),C("Unable to update Prayer timings right now"),e.abrupt("return");case 17:return e.next=19,c.json();case 19:l=e.sent,(i=l.data.timings).location=Object(S.a)({},P),i.date=(new Date).toDateString(),i.calcMethod=_,T(q,i),b(!1),e.next=29;break;case 28:b(!1);case 29:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}})()()}),[_,q,P,Y]);return r.a.createElement(r.a.Fragment,null,y?r.a.createElement("div",{className:"prayers-container"},x.map((function(e,t){return r.a.createElement(F,{status:"n",loading:!0,key:e})}))):r.a.createElement("div",{className:"prayers-container"},x.map((function(e,a){return r.a.createElement(F,{key:e,name:e,time:"12"===W?U(Y[e]):Y[e],timePassed:R(t,Y[e]),status:H[H.length-1][e],onClick:function(){f({name:e,status:H[H.length-1][e]}),o(!0)}})}))),w?r.a.createElement("div",{className:"card error"},r.a.createElement(g.a,{className:"icon",icon:v.d}),r.a.createElement("span",null,w),r.a.createElement("div",{className:"delete",onClick:function(){return C(null)}},r.a.createElement(g.a,{icon:v.g}))):null,l?r.a.createElement(L,{save:function(e){D(q,H,Object(N.a)({},e.name,e.status))},prayerState:p,modalIsOpen:l,toggle:o}):null)}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00:00",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"00:01";return parseInt(e.split(":")[0])>parseInt(t.split(":")[0])||parseInt(e.split(":")[0])===parseInt(t.split(":")[0])&&parseInt(e.split(":")[1])>parseInt(t.split(":")[1])}function U(e){return(e=e.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((e=e.slice(1))[5]=+e[0]<12?" AM":" PM",e[0]=+e[0]%12||12),e.join("")}function F(e){var t={o:function(t){return"You prayed ".concat(e.name," Prayer on time")},m:function(t){return"You missed ".concat(e.name," Prayer")},n:function(t){return e.timePassed,"".concat(e.time," Onwards ").concat(e.name," Prayer")},d:function(t){return"You prayed ".concat(e.name," Prayer at a delayed time")}};return r.a.createElement("button",{onClick:e.timePassed?e.onClick:null,className:"card prayer-card "+e.status+(e.timePassed?"":" future")},e.loading?r.a.createElement("span",{className:"filler"}):t[e.status](e))}P.a.setAppElement("body");a(63),a(64);var W=a(16),Y=a.n(W),H=["Shia Ithna-Ansari","University of Islamic Sciences, Karachi","Islamic Society of North America","Muslim World League","Umm Al-Qura University, Makkah","Egyptian General Authority of Survey","Institute of Geophysics, University of Tehran","Gulf Region","Kuwait","Qatar","Majlis Ugama Islam Singapura, Singapore","Union Organization islamic de France","Diyanet \u0130\u015fleri Ba\u015fkanl\u0131\u011f\u0131, Turkey","Spiritual Administration of Muslims of Russia"];function q(){var e=Object(n.useContext)(j).dispatch,t=Y.a.getAllCountries(),a=Object(n.useState)(null),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(null),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)({calcMethod:1,theme:"dark"}),f=Object(i.a)(p,2),v=f[0],g=f[1],h=function(e){var t=e.target;"country"==t.name?(g(Object(S.a)({},v,{country:t.options[t.selectedIndex].innerHTML})),d(Y.a.getStatesOfCountry(t.value))):"state"==t.name?(g(Object(S.a)({},v,{state:t.options[t.selectedIndex].innerHTML})),o(Y.a.getCitiesOfState(t.value))):"city"==t.name?g(Object(S.a)({},v,{city:t.options[t.selectedIndex].innerHTML})):g(Object(S.a)({},v,Object(N.a)({},t.name,t.value)))};return r.a.createElement("div",{className:"register-container"},r.a.createElement("div",{className:"card register-card"},r.a.createElement("div",{className:"heading"},"Prayer Journal",r.a.createElement("br",null)),r.a.createElement("p",null,"Before we begin, select a Prayer times calculation method and your location"),r.a.createElement("select",{onChange:h,value:v.calcMethod,name:"calcMethod"},H.map((function(e,t){return r.a.createElement("option",{value:t},e)}))),r.a.createElement("select",{name:"country",id:"country",value:null,onChange:h},r.a.createElement("option",null,"Select Country"),t.map((function(e,t){return r.a.createElement("option",{value:e.id},e.name)}))),m?r.a.createElement("select",{name:"state",id:"state",onChange:h},r.a.createElement("option",null,"Select State"),m.map((function(e,t){return r.a.createElement("option",{value:e.id},e.name)}))):null,l?r.a.createElement("select",{name:"city",id:"city",onChange:h},r.a.createElement("option",null,"Select City"),l.map((function(e,t){return r.a.createElement("option",{value:e.id},e.name)}))):null,v.city?r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return function(e,t){t.location={city:t.city,country:t.country},E.a.set("preferences",Object(S.a)({},t)),E.a.set("hasInitialised",!0);for(var a=[],n={Fajr:"n",Zuhr:"n",Asr:"n",Maghrib:"n",Isha:"n"},r=6;r>=0;r--)a.push(Object(S.a)({},n));a[a.length-1].timestamp=(new Date).toISOString(),E.a.set("stati",a),e({type:"INITIALISE_SUCCESS",source:"reg.js",payload:{preferences:t,stati:a}})}(e,v)}},"Save"):null))}function B(e){var t=e.modalIsOpen,a=e.toggle,c=Object(n.useContext)(j),l=c.dispatch,o=c.state.preferences,s=Object(n.useState)(o),u=Object(i.a)(s,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(i.a)(p,2),h=f[0],y=f[1],b=function(e){y(!0),d(Object(S.a)({},m,Object(N.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",null,r.a.createElement(P.a,{isOpen:t,shouldCloseOnOverlayClick:!0,onRequestClose:function(){return a(!1)},className:"modal settings-modal",overlayClassName:"modal-overlay settings-modal-overlay"},r.a.createElement("div",null,r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Data"),r.a.createElement("button",{className:"btn clickable primary",onClick:function(){window.confirm("Are you sure you want to delete all data? This data will not be recoverable")&&function(e){e({type:"INITIALISE_UNDO"}),E.a.clearAll(),window.location.reload()}(l)}},"Clear All Data")),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Timing"),r.a.createElement("select",{className:"slct input",name:"calcMethod",onChange:b,value:m.calcMethod},H.map((function(e,t){return r.a.createElement("option",{value:t,key:t},e)})))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Theme"),r.a.createElement("select",{className:"slct input",name:"theme",onChange:b,value:m.theme},r.a.createElement("option",{value:"dark"},"Dark"),r.a.createElement("option",{value:"light"},"Light"),r.a.createElement("option",{value:"auto"},"Auto"))),r.a.createElement("div",{className:"preference"},r.a.createElement("label",null,"Format"),r.a.createElement("select",{className:"slct input",name:"timeFormat",onChange:b,value:m.timeFormat},r.a.createElement("option",{value:"24"},"24 Hour Clock"),r.a.createElement("option",{value:"12"},"12 Hour Clock"))),r.a.createElement("div",{className:"spacer"}),r.a.createElement("button",{className:"btn primary clickable",onClick:function(){return a(!1)}},r.a.createElement(g.a,{className:"icon",icon:v.g})," ",r.a.createElement("span",null,"Discard")),r.a.createElement("button",{className:"btn"+(h?" primary clickable":""),onClick:h?function(){!function(e,t){e({type:"EDIT_PREFERENCES",payload:{preferences:Object(S.a)({},t)}}),E.a.set("preferences",t)}(l,m),a(!1)}:null},r.a.createElement(g.a,{className:"icon",icon:v.f})," ",r.a.createElement("span",null,"Save")))))}P.a.setAppElement("body");a(68);function G(e){return r.a.createElement("div",{id:"header-mobile"},e.children)}var J=function(){var e,t=Object(n.useContext)(j).state,a=t.hasInitialised,c=t.preferences,l=t.timings,o=r.a.useState(!1),s=Object(i.a)(o,2),u=s[0],m=s[1];if(!a)return r.a.createElement(q,null);var d=(new Date).getHours()+":"+(new Date).getMinutes();return e="auto"===c.theme?R(d,null===l||void 0===l?void 0:l.Sunrise)&&R(null===l||void 0===l?void 0:l.Sunset,d)?"light":"dark":c.theme,r.a.createElement("div",{className:"App ".concat(e||"dark","-theme")},r.a.createElement(G,null,r.a.createElement(g.a,{icon:v.c,className:"icon",onClick:function(){return m(!0)}}),r.a.createElement("div",{className:"text"},"Prayer Journal")),u?r.a.createElement(B,{toggle:m,modalIsOpen:u}):null,r.a.createElement("div",{className:"main"},r.a.createElement(A,null),r.a.createElement(_,{calcMethod:c.calcMethod,currTime:d,location:c.location})),r.a.createElement("div",{className:"side"},r.a.createElement(y,null),r.a.createElement(b,{text:c.location.city+", "+c.location.country},r.a.createElement(g.a,{icon:v.e})),r.a.createElement(b,{className:"only-desktop",text:"Preferences",onClick:function(){return m(!0)}},r.a.createElement(g.a,{icon:v.c}))))},Q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Z(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null,r.a.createElement(J,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/prayerjournal",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/prayerjournal","/service-worker.js");Q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Z(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Z(t,e)}))}}()}},[[25,1,2]]]);
//# sourceMappingURL=main.0d3f8b52.chunk.js.map